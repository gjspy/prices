asda:

look at firefox dev tools (SOFTWARE) network tab, inspected XHR filter
found alogolia
requires algolia-apikey



tesco:
ffx dev again
found xapi.tesco.com, resembles graphql structure from past experience
try "edit and resend", doesnt work
requires traceid, xapi-key and , trkid (trace is trk:trace)
notice other requests, traceid is sifferent
stack trace /:37 (fetch), use debugger to step through code
copied code to vs for easier navigatioN!!!!!!!!!
found request() builder, with line 5648 (r.traceId = `${ this.traceIdPrefix }:${ (0, S.v4) () }`),
S.v4 = k
k = all the maths for uuid v4 generation.

morrisons:
straight forward, no trouble with calling api
methods are reusable and easy to implement
does not have upc field, sad


**data analysis: get lots of different promos**

didnt want to name each class [supermarket]collector, but none were reused so I did for future reference.
while researching, discovered multiple shops aldi price match. implemented this as a feature..

changed get_storable_from_result return format to allow for multiple Link entries per product.

wanted to have a proxy
researched and found cloudflare workers
set up, discovered akamai blocks. built workaround.

writing storer, its the most procedural thing ever, just use obj to contain it all.

WROTE MY OWN SQLALCHEMY because I didnt like how it worked, and **NEEDED DB_THREAD. SO WAS HALFWAY THERE.

talk about data sizes in db fields (SMALLINT for price, save data as max price Â£100 rlly)

confirmed id(Store.db_id) == id(Store(Stores).db_id) True so we need our stuff. 

# TESTING uid FOR DUPLICATES
a = [misc.uid() for i in range(100_000)]

print(len(set(a)) == len(a))
print(len(set(a)))

creating logo: used google fonts, inkscape to convert font to svg, svgviewer and svgpatheditor

FUTURE THING is to interrogate old IDs, quit after X time (2 weeks?) and set as unavailable
TODO: DESIGN, FSM OF PACKSIZE REGEX!! (MEALY?)
IN ANALYSIS TALK ABOUT ITERATION OF PROCESSING DIFFERENT REGEXES.

JOB FOR ADMIN: WHEN ps_unit is NULL, or some fields are null.
JOB FOR ADMIN: linking Brand names. creating Parent. Every actual brand confirmed by admin should be a Parent. Need to confirm Dairylea-ASDA = Dairylea-TESCO. that will be a quick job of click click click.
JOB FOR ADMIN: linking brand names, when created new Parent, UPDATE Products SET BrandID=ParentID WHERE BrandID=OldBrandID. Bcs if don't then querying by BrandID is bad.
trying to find duplicate products = SELECT *, COUNT(*) AS C FROM Products GROUP BY PName, PS_Count, PS_SizeEach, BrandID ORDER BY C DESC;
this does not work if BrandID is different.
** FOR RESEARCH: REASON DO brands, eg "ESSENTIALS" = ASDA own brand, but aldi also have "ESSENTIALS"? so is dangerous. they are not the same. put StoreID in BRANd for UNIQUE key.

keywords: got list from MOR, 8 thousand
made algorithm manual, spent an hr doing around 1000, would get quicker but no
so asked ai and got list.
testing = 100 per query, each query around 1 minute.
500 queries = 50000 items, which is 500 minutes, 8 1/3 hrs.
do this at 9am and 9pm.

TALK ABOUT HOW I MADE IT QUICKER (FROM 100/min TO 300/min, BY LOCKS)

USING inplace params prevents SQL injection